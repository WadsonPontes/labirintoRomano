<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Labirinto Romano</title>
	<link rel="icon" type="image/png" href="img/menu/logo.png">
	<style type="text/css">
		@font-face {
  			font-family: WadKingFont;
  			src: url(font/WadKingFont.ttf);
		}
		*{
			font-family: WadKingFont;
			color: #fff;
			word-break: break-word;
			box-sizing: border-box;
		}
		body {
			width: 100vw;
			height: 100vh;
			margin: 0;
			padding: 0;
			background-color: #AAF3EC;
			overflow: hidden;
		}
		.desativado {
			display: none!important;
		}
		/* MENU PRINCIPAL */
		#inicial, #regras, #partida {
			display: flex;
			flex-wrap: wrap;
			flex-direction: column;
			justify-content: center;
			align-content: center;
			width: 100vw;
			height: 100vh;
		}
		.botao {
			max-width: 100vw;
			padding: 15px 40px;
			font-size: 35px;
			border-top: 2px solid #f00;
			border-left: 2px solid #f00;
			border-right: 2px solid #f00;
			border-bottom: 7px solid #f00;
			background-color: #FF5050;
			border-radius: 25px;
			cursor: pointer;
		}
		.botao:hover{
			margin: 10vh auto 5vh auto;
			border-top: 2px solid #3EB060;
			border-left: 2px solid #3EB060;
			border-right: 2px solid #3EB060;
			border-bottom: 7px solid #3EB060;
			background-color: #70E292;
		}
		#logo {
			max-width: 100vw;
			max-height: 60vh;
		}
		#botao-start {
			margin: 10vh auto 5vh auto;
		}
		/* REGRAS */
		#caixa-texto {
			max-width: 90vw;
			max-height: 90vh;
			padding: 50px 50px 100px 50px;
			border-radius: 25px;
			background-color: #FF6666;
		}
		#titulo {
			font-size: 40px;
			text-align: center;
		}
		#texto {
			font-size: 20px;
		}
		#botao-ok {
			position: absolute;
			left: 0;
			right: 0;
			margin: 0 auto;
			font-size: 40px;
		}
		/* PARTIDA */
		.tela {
			width: 50vw;
			height: 100vh;
		}
		.status {
			position: absolute;
			top: 0;
			font-size: 25px;
			z-index: 1;
		}
		#status0 {
			left: 0;
  			text-align: left;
		}
		#status1 {
			right: 0;
  			text-align: right;
		}
		.tabuleiro {
			display: grid;
			grid-template-columns: repeat(10, calc(min(5vw, 10vh)));
			grid-template-rows: repeat(10, calc(min(5vw, 10vh)));
			position: absolute;
			bottom: 0;
		}
		#tabuleiro0 {
			left: 0;
		}
		#tabuleiro1 {
			right: 0;
		}
		.celula {
			display: flex;
			align-items: center;
			justify-content: center;
  			aspect-ratio: 1;
			border: 1px solid #fff;
			background-size: cover;
		}
		.player {
			position: absolute;
			width: calc(min(5vw, 10vh));
			height: calc(min(5vw, 10vh));
			background-size: cover;
			transform-origin: center;
		}
		#player0 {
			background-image: url('img/player0/0.png')
		}
		#player1 {
			background-image: url('img/player1/0.png')
		}


		


		
		.name {
			color: #FF5050;
			text-align: center;
			margin: 25px;
			padding: 5px;
			background-color: rgba(255, 255, 255, 0.3);
		}
		.vidas {
			width: 150px;
			margin: -15px 25px 25px 25px;
		}
		#botao-back {
			top: 500px;
			left: 0;
			right: 0;
			margin: auto;
			font-size: 50px;
		}
	</style>
</head>
<body>
	<div id="preload" class="desativado"><img src="img/board/muro.png"><img src="img/board/porta.png"><img src="img/board/grama.png"><img src="img/menu/logo.png"><img src="img/menu/victory1.png"><img src="img/menu/victory2.png"><img src="img/player1/0.png"><img src="img/player2/0.png"><img src="img/status/vida0.png"><img src="img/status/vida1.png"><img src="img/status/vida2.png"><img src="img/status/vida3.png"><img src="img/status/vida4.png"><img src="img/status/vida5.png"></div>
	
	<div id="inicial">
		<img id="logo" src="img/menu/logo.png">
		<button id="botao-start" class="botao" onclick="eventoPrecionado()">start</button>
	</div>

	<div id="regras" class="desativado">
		<div id="caixa-texto">
			<div id="titulo">RegRas</div>
			<br/>
			<br/>
			<div id="texto">
				o gaRoto deve aNdaR poR casas PaRes com as teclas Wasd
				<br/>
				<br/>
				a gaRota deve aNdaR PoR casas iMPaRes coM as setas do teclado
				<br/>
				<br/>
				PeRde queM ficaR seM vida
				<br/>
				<br/>
				gaNha queM eNcoNtRaR a saida PRiMeiRo ou sobReviveR
			</div>
			<br/>
			<br/>
			<button id="botao-ok" class="botao" onclick="eventoPrecionado()">Ok</button>
		</div>
	</div>

	<div id="partida" class="desativado">
		<div id="tela0" class="tela">
			<div id="status0" class="status">
				<div id="name0" class="name">gaRoto</div>
				<img id="vidas0" class="vidas" src="img/status/vida5.png">
			</div>

			<div id="tabuleiro0" class="tabuleiro">
				<div id="c-0-0-0" class="celula"></div>
				<div id="c-0-0-1" class="celula"></div>
				<div id="c-0-0-2" class="celula"></div>
				<div id="c-0-0-3" class="celula"></div>
				<div id="c-0-0-4" class="celula"></div>
				<div id="c-0-0-5" class="celula"></div>
				<div id="c-0-0-6" class="celula"></div>
				<div id="c-0-0-7" class="celula"></div>
				<div id="c-0-0-8" class="celula"></div>
				<div id="c-0-0-9" class="celula"></div>

				<div id="c-0-1-0" class="celula"></div>
				<div id="c-0-1-1" class="celula"></div>
				<div id="c-0-1-2" class="celula"></div>
				<div id="c-0-1-3" class="celula"></div>
				<div id="c-0-1-4" class="celula"></div>
				<div id="c-0-1-5" class="celula"></div>
				<div id="c-0-1-6" class="celula"></div>
				<div id="c-0-1-7" class="celula"></div>
				<div id="c-0-1-8" class="celula"></div>
				<div id="c-0-1-9" class="celula"></div>

				<div id="c-0-2-0" class="celula"></div>
				<div id="c-0-2-1" class="celula"></div>
				<div id="c-0-2-2" class="celula"></div>
				<div id="c-0-2-3" class="celula"></div>
				<div id="c-0-2-4" class="celula"></div>
				<div id="c-0-2-5" class="celula"></div>
				<div id="c-0-2-6" class="celula"></div>
				<div id="c-0-2-7" class="celula"></div>
				<div id="c-0-2-8" class="celula"></div>
				<div id="c-0-2-9" class="celula"></div>

				<div id="c-0-3-0" class="celula"></div>
				<div id="c-0-3-1" class="celula"></div>
				<div id="c-0-3-2" class="celula"></div>
				<div id="c-0-3-3" class="celula"></div>
				<div id="c-0-3-4" class="celula"></div>
				<div id="c-0-3-5" class="celula"></div>
				<div id="c-0-3-6" class="celula"></div>
				<div id="c-0-3-7" class="celula"></div>
				<div id="c-0-3-8" class="celula"></div>
				<div id="c-0-3-9" class="celula"></div>

				<div id="c-0-4-0" class="celula"></div>
				<div id="c-0-4-1" class="celula"></div>
				<div id="c-0-4-2" class="celula"></div>
				<div id="c-0-4-3" class="celula"></div>
				<div id="c-0-4-4" class="celula"></div>
				<div id="c-0-4-5" class="celula"></div>
				<div id="c-0-4-6" class="celula"></div>
				<div id="c-0-4-7" class="celula"></div>
				<div id="c-0-4-8" class="celula"></div>
				<div id="c-0-4-9" class="celula"></div>

				<div id="c-0-5-0" class="celula"></div>
				<div id="c-0-5-1" class="celula"></div>
				<div id="c-0-5-2" class="celula"></div>
				<div id="c-0-5-3" class="celula"></div>
				<div id="c-0-5-4" class="celula"></div>
				<div id="c-0-5-5" class="celula"></div>
				<div id="c-0-5-6" class="celula"></div>
				<div id="c-0-5-7" class="celula"></div>
				<div id="c-0-5-8" class="celula"></div>
				<div id="c-0-5-9" class="celula"></div>

				<div id="c-0-6-0" class="celula"></div>
				<div id="c-0-6-1" class="celula"></div>
				<div id="c-0-6-2" class="celula"></div>
				<div id="c-0-6-3" class="celula"></div>
				<div id="c-0-6-4" class="celula"></div>
				<div id="c-0-6-5" class="celula"></div>
				<div id="c-0-6-6" class="celula"></div>
				<div id="c-0-6-7" class="celula"></div>
				<div id="c-0-6-8" class="celula"></div>
				<div id="c-0-6-9" class="celula"></div>

				<div id="c-0-7-0" class="celula"></div>
				<div id="c-0-7-1" class="celula"></div>
				<div id="c-0-7-2" class="celula"></div>
				<div id="c-0-7-3" class="celula"></div>
				<div id="c-0-7-4" class="celula"></div>
				<div id="c-0-7-5" class="celula"></div>
				<div id="c-0-7-6" class="celula"></div>
				<div id="c-0-7-7" class="celula"></div>
				<div id="c-0-7-8" class="celula"></div>
				<div id="c-0-7-9" class="celula"></div>

				<div id="c-0-8-0" class="celula"></div>
				<div id="c-0-8-1" class="celula"></div>
				<div id="c-0-8-2" class="celula"></div>
				<div id="c-0-8-3" class="celula"></div>
				<div id="c-0-8-4" class="celula"></div>
				<div id="c-0-8-5" class="celula"></div>
				<div id="c-0-8-6" class="celula"></div>
				<div id="c-0-8-7" class="celula"></div>
				<div id="c-0-8-8" class="celula"></div>
				<div id="c-0-8-9" class="celula"></div>

				<div id="c-0-9-0" class="celula"></div>
				<div id="c-0-9-1" class="celula"></div>
				<div id="c-0-9-2" class="celula"></div>
				<div id="c-0-9-3" class="celula"></div>
				<div id="c-0-9-4" class="celula"></div>
				<div id="c-0-9-5" class="celula"></div>
				<div id="c-0-9-6" class="celula"></div>
				<div id="c-0-9-7" class="celula"></div>
				<div id="c-0-9-8" class="celula"></div>
				<div id="c-0-9-9" class="celula"></div>
			</div>

			<div id="player0" class="player"></div>
		</div>

		<div id="tela1" class="tela">
			<div id="status1" class="status">
				<div id="name1" class="name">gaRota</div>
				<img id="vidas1" class="vidas" src="img/status/vida5.png">
			</div>

			<div id="tabuleiro1" class="tabuleiro">
				<div id="c-1-0-0" class="celula"></div>
				<div id="c-1-0-1" class="celula"></div>
				<div id="c-1-0-2" class="celula"></div>
				<div id="c-1-0-3" class="celula"></div>
				<div id="c-1-0-4" class="celula"></div>
				<div id="c-1-0-5" class="celula"></div>
				<div id="c-1-0-6" class="celula"></div>
				<div id="c-1-0-7" class="celula"></div>
				<div id="c-1-0-8" class="celula"></div>
				<div id="c-1-0-9" class="celula"></div>

				<div id="c-1-1-0" class="celula"></div>
				<div id="c-1-1-1" class="celula"></div>
				<div id="c-1-1-2" class="celula"></div>
				<div id="c-1-1-3" class="celula"></div>
				<div id="c-1-1-4" class="celula"></div>
				<div id="c-1-1-5" class="celula"></div>
				<div id="c-1-1-6" class="celula"></div>
				<div id="c-1-1-7" class="celula"></div>
				<div id="c-1-1-8" class="celula"></div>
				<div id="c-1-1-9" class="celula"></div>

				<div id="c-1-2-0" class="celula"></div>
				<div id="c-1-2-1" class="celula"></div>
				<div id="c-1-2-2" class="celula"></div>
				<div id="c-1-2-3" class="celula"></div>
				<div id="c-1-2-4" class="celula"></div>
				<div id="c-1-2-5" class="celula"></div>
				<div id="c-1-2-6" class="celula"></div>
				<div id="c-1-2-7" class="celula"></div>
				<div id="c-1-2-8" class="celula"></div>
				<div id="c-1-2-9" class="celula"></div>

				<div id="c-1-3-0" class="celula"></div>
				<div id="c-1-3-1" class="celula"></div>
				<div id="c-1-3-2" class="celula"></div>
				<div id="c-1-3-3" class="celula"></div>
				<div id="c-1-3-4" class="celula"></div>
				<div id="c-1-3-5" class="celula"></div>
				<div id="c-1-3-6" class="celula"></div>
				<div id="c-1-3-7" class="celula"></div>
				<div id="c-1-3-8" class="celula"></div>
				<div id="c-1-3-9" class="celula"></div>

				<div id="c-1-4-0" class="celula"></div>
				<div id="c-1-4-1" class="celula"></div>
				<div id="c-1-4-2" class="celula"></div>
				<div id="c-1-4-3" class="celula"></div>
				<div id="c-1-4-4" class="celula"></div>
				<div id="c-1-4-5" class="celula"></div>
				<div id="c-1-4-6" class="celula"></div>
				<div id="c-1-4-7" class="celula"></div>
				<div id="c-1-4-8" class="celula"></div>
				<div id="c-1-4-9" class="celula"></div>

				<div id="c-1-5-0" class="celula"></div>
				<div id="c-1-5-1" class="celula"></div>
				<div id="c-1-5-2" class="celula"></div>
				<div id="c-1-5-3" class="celula"></div>
				<div id="c-1-5-4" class="celula"></div>
				<div id="c-1-5-5" class="celula"></div>
				<div id="c-1-5-6" class="celula"></div>
				<div id="c-1-5-7" class="celula"></div>
				<div id="c-1-5-8" class="celula"></div>
				<div id="c-1-5-9" class="celula"></div>

				<div id="c-1-6-0" class="celula"></div>
				<div id="c-1-6-1" class="celula"></div>
				<div id="c-1-6-2" class="celula"></div>
				<div id="c-1-6-3" class="celula"></div>
				<div id="c-1-6-4" class="celula"></div>
				<div id="c-1-6-5" class="celula"></div>
				<div id="c-1-6-6" class="celula"></div>
				<div id="c-1-6-7" class="celula"></div>
				<div id="c-1-6-8" class="celula"></div>
				<div id="c-1-6-9" class="celula"></div>

				<div id="c-1-7-0" class="celula"></div>
				<div id="c-1-7-1" class="celula"></div>
				<div id="c-1-7-2" class="celula"></div>
				<div id="c-1-7-3" class="celula"></div>
				<div id="c-1-7-4" class="celula"></div>
				<div id="c-1-7-5" class="celula"></div>
				<div id="c-1-7-6" class="celula"></div>
				<div id="c-1-7-7" class="celula"></div>
				<div id="c-1-7-8" class="celula"></div>
				<div id="c-1-7-9" class="celula"></div>

				<div id="c-1-8-0" class="celula"></div>
				<div id="c-1-8-1" class="celula"></div>
				<div id="c-1-8-2" class="celula"></div>
				<div id="c-1-8-3" class="celula"></div>
				<div id="c-1-8-4" class="celula"></div>
				<div id="c-1-8-5" class="celula"></div>
				<div id="c-1-8-6" class="celula"></div>
				<div id="c-1-8-7" class="celula"></div>
				<div id="c-1-8-8" class="celula"></div>
				<div id="c-1-8-9" class="celula"></div>

				<div id="c-1-9-0" class="celula"></div>
				<div id="c-1-9-1" class="celula"></div>
				<div id="c-1-9-2" class="celula"></div>
				<div id="c-1-9-3" class="celula"></div>
				<div id="c-1-9-4" class="celula"></div>
				<div id="c-1-9-5" class="celula"></div>
				<div id="c-1-9-6" class="celula"></div>
				<div id="c-1-9-7" class="celula"></div>
				<div id="c-1-9-8" class="celula"></div>
				<div id="c-1-9-9" class="celula"></div>
			</div>

			<div id="player1" class="player"></div>
		</div>
	</div>

	<div id="game-over" class="game-over desativado">
		<img id="victory" class="imagem" src="img/menu/victory1.png">
		<input id="botao-back" class="botao" type="button" value="back" onclick="voltar()">
	</div>

	<script>
		class Elementos {
			constructor() {
				this.inicial = document.querySelector('#inicial');
				this.regras = document.querySelector('#regras');
				this.partida = document.querySelector('#partida');
				this.jogadores = [document.querySelector('#player0'), document.querySelector('#player1')];
				this.celulas = [];
			}
		}

		class Celula {
			constructor(id, x, y, tipo = 'grama', valor = 'x') {
				this.id = id;
				this.x = x;
				this.y = y;
				this.tipo = tipo;
				this.valor = valor;
			}

			atualizar() {
				const e = elementos.celulas[this.id][this.x][this.y];
				e.style.backgroundImage = `url('img/board/${this.tipo}.png')`;
				e.textContent = this.valor;
			}
		}

		class Tabuleiro {
			constructor(id) {
				this.id = id;
				if (id) {
					this.celulas = [
						[
							new Celula(id, 0, 0, 'muro', ''),
							new Celula(id, 0, 1, 'porta', ''),
							new Celula(id, 0, 2, 'muro', ''),
							new Celula(id, 0, 3, 'muro', ''),
							new Celula(id, 0, 4, 'muro', ''),
							new Celula(id, 0, 5, 'muro', ''),
							new Celula(id, 0, 6, 'muro', ''),
							new Celula(id, 0, 7, 'muro', ''),
							new Celula(id, 0, 8, 'muro', ''),
							new Celula(id, 0, 9, 'muro', '')
						],
						[
							new Celula(id, 1, 0, 'muro', ''),
							new Celula(id, 1, 1, 'grama', 'MI'),
							new Celula(id, 1, 2, 'muro', 'VI'),
							new Celula(id, 1, 3, 'muro', 'XL'),
							new Celula(id, 1, 4, 'muro', 'CD'),
							new Celula(id, 1, 5, 'grama', 'IX'),
							new Celula(id, 1, 6, 'grama', ''),
							new Celula(id, 1, 7, 'grama', ''),
							new Celula(id, 1, 8, 'muro', 'IV'),
							new Celula(id, 1, 9, 'muro', 'II')
						],
						[
							new Celula(id, 2, 0, 'muro', ''),
							new Celula(id, 2, 1, 'grama', ''),
							new Celula(id, 2, 2, 'grama', ''),
							new Celula(id, 2, 3, 'grama', ''),
							new Celula(id, 2, 4, 'grama', ''),
							new Celula(id, 2, 5, 'grama', ''),
							new Celula(id, 2, 6, 'muro', ''),
							new Celula(id, 2, 7, 'grama', ''),
							new Celula(id, 2, 8, 'grama', ''),
							new Celula(id, 2, 9, 'muro', '')
						],
						[
							new Celula(id, 3, 0, 'muro', ''),
							new Celula(id, 3, 1, 'muro', ''),
							new Celula(id, 3, 2, 'muro', ''),
							new Celula(id, 3, 3, 'muro', ''),
							new Celula(id, 3, 4, 'muro', ''),
							new Celula(id, 3, 5, 'muro', ''),
							new Celula(id, 3, 6, 'muro', ''),
							new Celula(id, 3, 7, 'muro', ''),
							new Celula(id, 3, 8, 'grama', ''),
							new Celula(id, 3, 9, 'muro', '')
						],
						[
							new Celula(id, 4, 0, 'muro', ''),
							new Celula(id, 4, 1, 'grama', ''),
							new Celula(id, 4, 2, 'grama', ''),
							new Celula(id, 4, 3, 'grama', ''),
							new Celula(id, 4, 4, 'grama', ''),
							new Celula(id, 4, 5, 'grama', ''),
							new Celula(id, 4, 6, 'grama', ''),
							new Celula(id, 4, 7, 'grama', ''),
							new Celula(id, 4, 8, 'grama', ''),
							new Celula(id, 4, 9, 'muro', '')
						],
						[
							new Celula(id, 5, 0, 'muro', ''),
							new Celula(id, 5, 1, 'grama', ''),
							new Celula(id, 5, 2, 'muro', ''),
							new Celula(id, 5, 3, 'muro', ''),
							new Celula(id, 5, 4, 'muro', ''),
							new Celula(id, 5, 5, 'muro', ''),
							new Celula(id, 5, 6, 'muro', ''),
							new Celula(id, 5, 7, 'muro', ''),
							new Celula(id, 5, 8, 'muro', ''),
							new Celula(id, 5, 9, 'muro', '')
						],
						[
							new Celula(id, 6, 0, 'muro', ''),
							new Celula(id, 6, 1, 'grama', ''),
							new Celula(id, 6, 2, 'grama', ''),
							new Celula(id, 6, 3, 'grama', ''),
							new Celula(id, 6, 4, 'grama', ''),
							new Celula(id, 6, 5, 'muro', ''),
							new Celula(id, 6, 6, 'grama', ''),
							new Celula(id, 6, 7, 'grama', ''),
							new Celula(id, 6, 8, 'grama', ''),
							new Celula(id, 6, 9, 'muro', '')
						],
						[
							new Celula(id, 7, 0, 'muro', ''),
							new Celula(id, 7, 1, 'muro', ''),
							new Celula(id, 7, 2, 'grama', ''),
							new Celula(id, 7, 3, 'muro', ''),
							new Celula(id, 7, 4, 'grama', ''),
							new Celula(id, 7, 5, 'muro', ''),
							new Celula(id, 7, 6, 'grama', ''),
							new Celula(id, 7, 7, 'muro', ''),
							new Celula(id, 7, 8, 'grama', ''),
							new Celula(id, 7, 9, 'muro', '')
						],
						[
							new Celula(id, 8, 0, 'muro', ''),
							new Celula(id, 8, 1, 'grama', ''),
							new Celula(id, 8, 2, 'grama', ''),
							new Celula(id, 8, 3, 'muro', ''),
							new Celula(id, 8, 4, 'grama', ''),
							new Celula(id, 8, 5, 'grama', ''),
							new Celula(id, 8, 6, 'grama', ''),
							new Celula(id, 8, 7, 'muro', ''),
							new Celula(id, 8, 8, 'grama', ''),
							new Celula(id, 8, 9, 'muro', '')
						],
						[
							new Celula(id, 9, 0, 'muro', ''),
							new Celula(id, 9, 1, 'muro', ''),
							new Celula(id, 9, 2, 'muro', ''),
							new Celula(id, 9, 3, 'muro', ''),
							new Celula(id, 9, 4, 'muro', ''),
							new Celula(id, 9, 5, 'muro', ''),
							new Celula(id, 9, 6, 'muro', ''),
							new Celula(id, 9, 7, 'muro', ''),
							new Celula(id, 9, 8, 'muro', ''),
							new Celula(id, 9, 9, 'muro', '')
						]
					];
				}
				else {
					this.celulas = [
						[
							new Celula(id, 0, 0, 'muro', ''),
							new Celula(id, 0, 1, 'muro', ''),
							new Celula(id, 0, 2, 'muro', ''),
							new Celula(id, 0, 3, 'muro', ''),
							new Celula(id, 0, 4, 'muro', ''),
							new Celula(id, 0, 5, 'muro', ''),
							new Celula(id, 0, 6, 'muro', ''),
							new Celula(id, 0, 7, 'muro', ''),
							new Celula(id, 0, 8, 'porta', ''),
							new Celula(id, 0, 9, 'muro', '')
						],
						[
							new Celula(id, 1, 0, 'muro', ''),
							new Celula(id, 1, 1, 'grama', ''),
							new Celula(id, 1, 2, 'grama', ''),
							new Celula(id, 1, 3, 'grama', ''),
							new Celula(id, 1, 4, 'muro', ''),
							new Celula(id, 1, 5, 'muro', ''),
							new Celula(id, 1, 6, 'muro', ''),
							new Celula(id, 1, 7, 'muro', ''),
							new Celula(id, 1, 8, 'grama', ''),
							new Celula(id, 1, 9, 'muro', '')
						],
						[
							new Celula(id, 2, 0, 'muro', ''),
							new Celula(id, 2, 1, 'grama', ''),
							new Celula(id, 2, 2, 'muro', ''),
							new Celula(id, 2, 3, 'grama', ''),
							new Celula(id, 2, 4, 'grama', ''),
							new Celula(id, 2, 5, 'grama', ''),
							new Celula(id, 2, 6, 'grama', ''),
							new Celula(id, 2, 7, 'grama', ''),
							new Celula(id, 2, 8, 'grama', ''),
							new Celula(id, 2, 9, 'muro', '')
						],
						[
							new Celula(id, 3, 0, 'muro', ''),
							new Celula(id, 3, 1, 'grama', ''),
							new Celula(id, 3, 2, 'muro', ''),
							new Celula(id, 3, 3, 'muro', ''),
							new Celula(id, 3, 4, 'muro', ''),
							new Celula(id, 3, 5, 'muro', ''),
							new Celula(id, 3, 6, 'muro', ''),
							new Celula(id, 3, 7, 'muro', ''),
							new Celula(id, 3, 8, 'muro', ''),
							new Celula(id, 3, 9, 'muro', '')
						],
						[
							new Celula(id, 4, 0, 'muro', ''),
							new Celula(id, 4, 1, 'grama', ''),
							new Celula(id, 4, 2, 'grama', ''),
							new Celula(id, 4, 3, 'grama', ''),
							new Celula(id, 4, 4, 'grama', ''),
							new Celula(id, 4, 5, 'grama', ''),
							new Celula(id, 4, 6, 'grama', ''),
							new Celula(id, 4, 7, 'grama', ''),
							new Celula(id, 4, 8, 'grama', ''),
							new Celula(id, 4, 9, 'muro', '')
						],
						[
							new Celula(id, 5, 0, 'muro', ''),
							new Celula(id, 5, 1, 'muro', ''),
							new Celula(id, 5, 2, 'grama', ''),
							new Celula(id, 5, 3, 'muro', ''),
							new Celula(id, 5, 4, 'muro', ''),
							new Celula(id, 5, 5, 'muro', ''),
							new Celula(id, 5, 6, 'muro', ''),
							new Celula(id, 5, 7, 'muro', ''),
							new Celula(id, 5, 8, 'grama', ''),
							new Celula(id, 5, 9, 'muro', '')
						],
						[
							new Celula(id, 6, 0, 'muro', ''),
							new Celula(id, 6, 1, 'grama', ''),
							new Celula(id, 6, 2, 'grama', ''),
							new Celula(id, 6, 3, 'muro', ''),
							new Celula(id, 6, 4, 'grama', ''),
							new Celula(id, 6, 5, 'grama', ''),
							new Celula(id, 6, 6, 'grama', ''),
							new Celula(id, 6, 7, 'muro', ''),
							new Celula(id, 6, 8, 'grama', ''),
							new Celula(id, 6, 9, 'muro', '')
						],
						[
							new Celula(id, 7, 0, 'muro', ''),
							new Celula(id, 7, 1, 'muro', ''),
							new Celula(id, 7, 2, 'muro', ''),
							new Celula(id, 7, 3, 'muro', ''),
							new Celula(id, 7, 4, 'grama', ''),
							new Celula(id, 7, 5, 'muro', ''),
							new Celula(id, 7, 6, 'grama', ''),
							new Celula(id, 7, 7, 'muro', ''),
							new Celula(id, 7, 8, 'grama', ''),
							new Celula(id, 7, 9, 'muro', '')
						],
						[
							new Celula(id, 8, 0, 'muro', ''),
							new Celula(id, 8, 1, 'grama', ''),
							new Celula(id, 8, 2, 'grama', ''),
							new Celula(id, 8, 3, 'grama', ''),
							new Celula(id, 8, 4, 'grama', ''),
							new Celula(id, 8, 5, 'muro', ''),
							new Celula(id, 8, 6, 'grama', ''),
							new Celula(id, 8, 7, 'grama', ''),
							new Celula(id, 8, 8, 'grama', ''),
							new Celula(id, 8, 9, 'muro', '')
						],
						[
							new Celula(id, 9, 0, 'muro', ''),
							new Celula(id, 9, 1, 'muro', ''),
							new Celula(id, 9, 2, 'muro', ''),
							new Celula(id, 9, 3, 'muro', ''),
							new Celula(id, 9, 4, 'muro', ''),
							new Celula(id, 9, 5, 'muro', ''),
							new Celula(id, 9, 6, 'muro', ''),
							new Celula(id, 9, 7, 'muro', ''),
							new Celula(id, 9, 8, 'muro', ''),
							new Celula(id, 9, 9, 'muro', '')
						]
					];
				}
				
				elementos.celulas[id] = [];

				for (let i = 0; i < 10; ++i) {
					elementos.celulas[id][i] = [];

					for (let j = 0; j < 10; ++j) {
						elementos.celulas[id][i][j] = document.querySelector(`#c-${id}-${i}-${j}`);
						this.celulas[i][j].atualizar();
					}
				}
			}
		}

		class Jogador {
			constructor(id) {
				this.id = id;
				this.x = id ? 8 : 1;
				this.y = 8;
				this.direcao = id ? -1 : 1;
				this.tabuleiro = new Tabuleiro(id);
				this.vidas = 5;
				this.estado = 'parado';
				this.duracao = 500;
				this.quadros = id ? 21 : 16;
				this.timing = { duration: this.duracao, iterations: 1 };
				this.keyframes = [];

				for (let i = 1; i < this.quadros; ++i) {
					this.keyframes[i-1] = { backgroundImage: `url('img/player${id}/${i}.png')` };
				}

				this.atualizar();
			}

			atualizar() {
				const e = elementos.jogadores[this.id];
				e.style.transform = `scaleX(${this.direcao})`;
				if (this.id) e.style.right = `calc(min(${(9 - this.x) * 5}vw, ${(9 - this.x) * 10}vh))`;
				else e.style.left = `calc(min(${(this.x) * 5}vw, ${this.x * 10}vh))`;
				e.style.bottom = `calc(min(${(9 - this.y) * 5}vw, ${(9 - this.y) * 10}vh))`;
			}

			andar(tecla) {
				const e = elementos.jogadores[this.id];
				const d = this.duracao/1000;
				this.x += tecla.x;
				this.y += tecla.y;
				if (tecla.x) this.direcao = tecla.x;
				this.estado = 'andando';
				e.style.transition = `top ${d}s linear, left ${d}s linear, right ${d}s linear, bottom ${d}s linear`;
				this.atualizar();
				e.animate(this.keyframes, this.timing);
				setTimeout(() => {
					this.estado = 'parado';
					e.style.transition = 'none';
				}, this.duracao);
			}
		}

		class Tecla {
			constructor(k, x, y, jogador) {
				this.id = k;
				this.x = x;
				this.y = y;
				this.jogador = jogador;
			}
		}

		class Teclas {
			constructor(jogador0, jogador1) {
				this.KeyW = new Tecla('KeyW', 0, -1, jogador0);
				this.KeyD = new Tecla('KeyD', 1, 0, jogador0);
				this.KeyS = new Tecla('KeyS', 0, 1, jogador0);
				this.KeyA = new Tecla('KeyA', -1, 0, jogador0);

				this.ArrowUp = new Tecla('ArrowUp', 0, -1, jogador1);
				this.ArrowRight = new Tecla('ArrowRight', 1, 0, jogador1);
				this.ArrowDown = new Tecla('ArrowDown', 0, 1, jogador1);
				this.ArrowLeft = new Tecla('ArrowLeft', -1, 0, jogador1);
			}
		}

		class Dados {
			constructor() {
				this.tela = 'inicial';
				this.jogador0 = new Jogador(0);
				this.jogador1 = new Jogador(1);
				this.teclas = new Teclas(this.jogador0, this.jogador1);
			}
		}

		const elementos = new Elementos();
		const dados = new Dados();
		
		function isTelaConfirmacao(e) {
			return e == null || e.code == 'Enter' || e.code == 'Space';
		}

		function trocarTela(nova) {
			elementos[dados.tela].classList.add('desativado');
			elementos[nova].classList.remove('desativado');
			dados.tela = nova;
		}

		function isMovimentoValido(k) {
			return true;
		}

		function movimentar(e) {
			const k = dados.teclas[e.code];

			if (k && isMovimentoValido(k) && k.jogador.estado == 'parado') {
				k.jogador.andar(k);
			}
		}

		function eventoPrecionado(e) {
			if (dados.tela == 'inicial' && isTelaConfirmacao(e)) {
				trocarTela('regras');
			}
			else if (dados.tela == 'regras' && isTelaConfirmacao(e)) {
				trocarTela('partida');
			}
			else if (dados.tela == 'partida') {
				movimentar(e);
			}
		}





		function gameOver(campo, resultado) {
			if (resultado == "vitoria") {
				img_wins.src = "img/menu/victory" + campo.id + ".png";
			}
			else {
				img_wins.src = "img/menu/victory" + (3 - campo.id) + ".png";
			}
			estado = "game_over";
			partida.classList.add("desativado");
			game_over.classList.remove("desativado");

			for (let k = 1; k < 3; k++) {
				for (let i = 0; i < 8; i++) {
					for (let j = 0; j < 10; j++) {
						document.getElementById("casa" + k + i + j).innerHTML = "";
						document.getElementById("casa" + k + i + j).classList.remove("verde");
						document.getElementById("casa" + k + i + j).classList.remove("vermelho");
					}
				}
				img_vidas[k].src = "img/status/vida5.png";
			}
		}

		function voltar() {
			menu.classList.remove("desativado");
			game_over.classList.add("desativado");
		}

		window.addEventListener("keydown", eventoPrecionado);
	</script>
</body>
</html>